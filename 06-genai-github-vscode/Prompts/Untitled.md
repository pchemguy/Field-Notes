https://chatgpt.com/c/69373bd1-b290-8326-80e3-48ca3f89790d

# **Project Documentation Construction**

---

## **0. Role & Mindset**

**The overarching goal is development of optimized for AI consolidated project documentation by analyzing project code, as well as partial and/or partially relevant documents. This deep research query focuses on the preparatory Stage 1 aiming to enrich the project for subsequent AI-assisted targeted analysis of the code base, isolation of implementation of specific features, and generation of standalone modules implementing selected features in a different language (primarily Python).**

**YOU will**
1. Perform multi-stage reasoning and documentation synthesis.
2. Produce **code blocks that represent repository files**, which the user will later save.
3. Extract insights from local files and from external documentation listed in
   `docs/EXTERNAL_SOURCES.md`.
4. Generate **incremental research layers**, where each section contributes to a final multi-file documentation corpus.

You must think:

* In structured, multi-phase research steps.
* With explicit chain-of-thought.
* Producing formal outputs rather than modifying files directly.

Whenever generating a file, output it as:

````markdown
```markdown filename=docs/path/to/file.md
# File contents here
```
````

---

## **1. High-Level Objectives (Deep Research Deliverables)**

Your Deep Research task focuses on **Stage 1 – Documentation Construction**:

1. Reconstruct architecture and components of the Java codebase.
2. Produce a **coherent documentation corpus** that is:
    * **AI-friendly** → optimized for future LLM agents
    * **Human-readable** → structured, formal, clear
3. Produce the following files through Deep Research file-generation blocks:

```
docs/DESIGN.md
docs/ARCHITECTURE.md
docs/COMPONENTS.md
docs/ALGORITHMS.md
docs/API_MAPPING.md
docs/AGENTS.md
docs/DOCUMENTATION_PLAN.md
docs/LEGACY_REFERENCES.md
docs/VSCODE_AGENT_WORKFLOW.md
docs/EXTERNAL_SOURCES.md      (must be read, not replaced)
```

4. Produce (as needed) analysis files under:

```
docs/_analysis/
docs/_generated/
```

5. All external sources should be derived from:

```
docs/EXTERNAL_SOURCES.md
```

---

## **2. Deep Research Execution Pattern**

Each Deep Research layer must:

### **Step 1 — Restate the Current Research Goal**

Say what you are analyzing or generating *in this section*.

### **Step 2 — Inspect Context**

You may assume access to:
* Provided repository structure
* Local files (user can paste content)
* Entries in `EXTERNAL_SOURCES.md`

If something is missing, **ask the user to provide it**.

### **Step 3 — Plan Explicitly**

Before writing any file or any new subsection of the Deep Research report:
* Break the problem into 3–7 research substeps.
* Select which files will be generated.
* Decide which extracted information will populate which sections.

### **Step 4 — Execute Research**

This is where the Deep Research agent:
* Analyzes materials
* Summarizes findings
* Creates structured documentation
* Generates code blocks representing repository files

### **Step 5 — Output Repository Files**

Output each created or updated file as:

````markdown
```markdown filename=docs/.../FILE.md
# contents
```
````

Never modify files implicitly.
Always output entire file contents explicitly.

### **Step 6 — Summarize and Identify Next Research Tasks**

Conclude the section with:
* Summary of findings
* Gaps or missing inputs
* Next steps

These next steps should also be incorporated into:
* `docs/_analysis/agent_plan.md`
* `docs/DOCUMENTATION_PLAN.md`

---

## **3. Internal State & Deep Research Artifacts**

The Deep Research workflow requires explicitly maintaining:

```
docs/_analysis/agent_plan.md
docs/_analysis/symbol_map.md
docs/_analysis/execution_flows.md
docs/_analysis/dependency_graph.md
docs/_generated/scratch_notes.md
```

Whenever research produces a material intermediate insight, it must be written to one of these files via a code block.

Example:

````markdown
```markdown filename=docs/_analysis/symbol_map.md
# Symbol Map (auto-generated by Deep Research)
...
```
````

---

## **4. Deep Research Phases**

### **Phase 0 — Initial Repository Reconnaissance**

Research goal: Construct a mental and written model of the project.

Deep Research outputs:

* Summary of directories
* Summary of Java source tree
* An initial version of `agent_plan.md`

---

### **Phase 1 — Symbol Extraction & Package Map**

Research goal:
* Enumerate packages
* Class lists
* Responsibility hints

Deep Research outputs:
* `symbol_map.md` (complete or partial)
* Updates to `agent_plan.md`

---

### **Phase 2 — Architecture Reconstruction**

Research goal:
* Identify subsystems
* Document data flows
* Identify main execution paths

Deep Research outputs:
* Initial `ARCHITECTURE.md`
* `execution_flows.md`
* Updates to `agent_plan.md`

---

### **Phase 3 — Component & Algorithm Documentation**

Research output:
* Structured component entries in `COMPONENTS.md`
* Algorithm catalog in `ALGORITHMS.md`

---

### **Phase 4 — API Mapping & Python Bridge**

Research output:
* Conceptual Java → Python mapping written to `API_MAPPING.md`

---

### **Phase 5 — Agent Navigation Guide**

Research output:
* Structured prompt templates and LLM usage manual inside `AGENTS.md`

---

### **Phase 6 — External Documentation Integration**

Deep Research MUST read:

```
docs/EXTERNAL_SOURCES.md
```

Then:

* Fetch content from each `SOURCE` block
* Extract relevant TrakEM2 information
* Write structured summaries into `LEGACY_REFERENCES.md`
* Cross-link with other docs

Only sources listed in the manifest may be used.

---

### **Phase 7 — Refinement Cycles**

Research output:

* Updated architecture summaries
* Filled gaps
* Resolved ambiguities
* Additional updates to `DOCUMENTATION_PLAN.md` and `agent_plan.md`

---

## **5. Deep Research Guardrails & CoT Techniques**

1. **All repository changes are expressed as file-generation code blocks.**
2. **Never assume missing content:** request it.
3. **Mark uncertain conclusions** with `[UNCERTAIN]`.
4. **Separate extraction from interpretation** (analysis → documentation).
5. **Always cross-check across previously generated files.**

---

## **6. Interaction Pattern for Deep Research Runs**

Each Deep Research Phase must include:
1. A high-level research goal statement
2. A step-by-step plan
3. Analytical narrative
4. One or more file-generation blocks
5. A summary section with next steps

Example:

````
## Phase 2 — Architecture Reconstruction
### Research Goal
...

### Plan
1.
2.
3.

### Findings
...

### File Outputs
```markdown filename=docs/ARCHITECTURE.md
#### Architecture Overview
...
````

